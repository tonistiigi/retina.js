(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1};a=function(){function a(){}return a.prototype._pattern=/([\.\-_][0-9])?@(1x)?\.[a-z]+$/i,a.prototype.isValidFilename=function(a){return!!a.match(this._pattern)},a.prototype.zoomLevelsForFilename=function(a){var b;return b=a.match(this._pattern),b[1]?parseInt(b[1].slice(1),10):2},a.prototype.filenameForZoom=function(a,b){var c;return b===1?a:(c=a.match(/(.+)@(.*?)\.([a-z]+)$/i),c[1]+"@"+Math.pow(2,b-1)+"x."+c[3])},a}(),b=function(){function a(a){this.conf=a!=null?a:[]}return a.prototype._confForFilename=function(a){var b,c,d,e;e=this.conf;for(c=0,d=e.length;c<d;c++){b=e[c],typeof b=="string"&&(b=[b]);if(a.match(new RegExp(""+b[0]+"$")))return b}return null},a.prototype.isValidFilename=function(a){return!!this._confForFilename(a)},a.prototype.zoomLevelsForFilename=function(a){var b;return b=this._confForFilename(a),b.length>1?typeof b[1]=="number"?b[1]:b.length:2},a.prototype.filenameForZoom=function(a,b){var c,d,e,f;return c=this._confForFilename(a),d=c[0],c.length===1||c.length>1&&typeof c[1]=="number"?b===1?a:(e=a.match(/(.+?)(@)?([0-9]+x)?\.([a-z]+$)/i),f=b===1?"":"@"+Math.pow(2,b-1)+"x",""+e[1]+f+"."+e[4]):c[b-1]},a}(),h=[],e=function(){},d=function(a){return h.push(a)},i=function(a){var b;if(n.call(h,a)>=0)return b=h.indexOf(a),h.splice(b,1)},f=function(){while(h.length)i(h[0])},m=function(a){if(h.length!==1||h[0]!==a)return f,d(a)},k=function(){},l=function(a){a==null&&(a=!0)},c=function(a,b,c,d){b==null&&(b=""),c==null&&(c=0),d==null&&(d=0)},g=function(a){},j={allParsers:function(){return h.slice()},addParser:d,removeParser:i,clearParsers:f,setParser:m,scan:k,setManualMode:l,activateElement:c,ignoreElement:g,DefaultParser:a,StaticParser:b},j.addParser(new a),(typeof module!="undefined"&&module!==null?module.exports:void 0)!=null?module.exports=j:this.retina=j}).call(this)